name: Java CD with Gradle

on:
  push:
    branches: [ "baePoYong" ]

jobs:
  test-login:
    runs-on: ubuntu-latest
    steps:
      - name: '1. Check if Secrets are Accessible'
        run: |
          # Secretì´ ë¹„ì–´ìˆëŠ”ì§€ ë¨¼ì € í™•ì¸í•©ë‹ˆë‹¤.
          if [ -z "${{ secrets.DOCKER_USERNAME }}" ]; then
            echo "ERROR: DOCKER_USERNAME secret is not set or empty."
            exit 1
          fi
          if [ -z "${{ secrets.DOCKER_PASSWORD }}" ]; then
            echo "ERROR: DOCKER_PASSWORD secret is not set or empty."
            exit 1
          fi
          echo "âœ… Secrets are present. Proceeding to login..."
          echo "Attempting to log in as user: ${{ secrets.DOCKER_USERNAME }}"

      - name: '2. Login to Docker Hub'
        # ê°€ì¥ í‘œì¤€ì ì´ê³  ì•ˆì •ì ì¸ Docker ê³µì‹ ë¡œê·¸ì¸ ì•¡ì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
        uses: docker/login-action@v3
        with:
          username: ${{ secrets.DOCKER_USERNAME }}
          password: ${{ secrets.DOCKER_PASSWORD }}

      - name: '3. Success Message'
        run: echo "ğŸ‰ Docker Hub login was successful! The credentials are correct."